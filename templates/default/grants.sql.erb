# create hop db if it doesn't exist
CREATE DATABASE IF NOT EXISTS hop;
CREATE DATABASE IF NOT EXISTS kthfs;

# create hop db if it doesn't exist
#CREATE DATABASE IF NOT EXISTS kthfs;


# Glassfish dashboard webapp has been using root@localhost
# Use new kthfs user...
#GRANT ALL PRIVILEGES ON *.* to 'root'@'localhost' identified by '<%= node[:mysql][:root][:password]  %>';


# Give access from this IP
GRANT ALL PRIVILEGES ON *.* to 'root'@'<% @my_ip %>' identified by '<%= node[:mysql][:root][:password]  %>';

GRANT ALL PRIVILEGES ON *.* to '<%= node[:mysql][:user] %>'@'localhost' identified by '<%= node[:mysql][:password] %>';
GRANT ALL PRIVILEGES ON *.* to '<%= node[:mysql][:user] %>'@'<%= @my_ip %>' identified by '<%= node[:mysql][:password] %>';
GRANT ALL PRIVILEGES ON *.* to '<%= node[:mysql][:user] %>'@'%' identified by '<%= node[:mysql][:password] %>';

